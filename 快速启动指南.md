# MarketNiche 快速启动指南

## 第一步：项目初始化（推荐方案）

### 方案A：最小可行原型（MVP）- 推荐新手

**目标**: 2周内实现一个可演示的原型

#### 技术栈简化版
- **后端**: FastAPI (Python)
- **数据库**: SQLite (开发阶段) → PostgreSQL (生产)
- **前端**: React + Vite
- **爬虫**: Requests + BeautifulSoup (简单场景) 或 Scrapy (复杂场景)

#### 开发顺序
1. **Day 1-2**: 搭建基础项目结构
2. **Day 3-5**: 实现简单的数据采集（手动测试几个产品）
3. **Day 6-8**: 实现基础API（产品列表、ASIN查询）
4. **Day 9-12**: 实现前端页面（市场分析器、产品数据库）
5. **Day 13-14**: 集成和测试

### 方案B：生产就绪架构（完整方案）

**目标**: 3-4个月实现完整产品

按照《技术实现方案.md》中的路线图执行。

---

## 第二步：立即可以开始的代码

### 1. 创建项目结构

```
marketniche/
├── backend/                 # 后端服务
│   ├── app/
│   │   ├── __init__.py
│   │   ├── main.py         # FastAPI主应用
│   │   ├── models/         # 数据模型
│   │   ├── api/            # API路由
│   │   ├── services/       # 业务逻辑
│   │   └── database.py     # 数据库连接
│   ├── scrapers/           # 爬虫模块
│   │   ├── amazon_nl.py    # 荷兰站爬虫
│   │   └── utils.py        # 工具函数
│   ├── requirements.txt
│   └── Dockerfile
│
├── frontend/                # 前端应用
│   ├── src/
│   │   ├── components/     # React组件
│   │   ├── pages/          # 页面
│   │   ├── services/       # API调用
│   │   └── App.tsx
│   ├── package.json
│   └── Dockerfile
│
├── docker-compose.yml       # 容器编排
├── README.md
└── .env.example            # 环境变量模板
```

### 2. 最小可行代码示例

#### 后端 - FastAPI基础结构

**backend/app/main.py**
```python
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware

app = FastAPI(title="MarketNiche API", version="1.0.0")

# 允许跨域（开发环境）
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3000"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

@app.get("/")
def read_root():
    return {"message": "MarketNiche API"}

@app.get("/api/products")
def get_products():
    # TODO: 从数据库查询产品
    return {"products": []}

@app.get("/api/products/{asin}")
def get_product(asin: str):
    # TODO: 查询单个产品详情
    return {"asin": asin}
```

#### 爬虫 - 简单示例

**backend/scrapers/amazon_nl.py**
```python
import requests
from bs4 import BeautifulSoup
import time
import random

def scrape_product_page(asin: str):
    """
    爬取亚马逊荷兰站产品页面
    注意: 这只是一个示例，实际需要处理反爬虫机制
    """
    url = f"https://www.amazon.nl/dp/{asin}"
    
    headers = {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
    }
    
    try:
        response = requests.get(url, headers=headers, timeout=10)
        response.raise_for_status()
        
        soup = BeautifulSoup(response.content, 'html.parser')
        
        # 提取产品信息（需要根据实际HTML结构调整）
        title = soup.find('span', {'id': 'productTitle'})
        price = soup.find('span', {'class': 'a-price-whole'})
        
        return {
            'asin': asin,
            'title': title.text.strip() if title else None,
            'price': price.text.strip() if price else None,
        }
    except Exception as e:
        print(f"Error scraping {asin}: {e}")
        return None
    finally:
        # 控制请求频率
        time.sleep(random.uniform(1, 2))
```

---

## 第三步：数据采集策略（重要！）

### 合规采集建议

1. **使用官方API（如果可用）**
   - 亚马逊Product Advertising API (PA-API)
   - 检查是否有荷兰站支持

2. **公开数据采集原则**
   - ✅ 可以采集：产品公开信息、价格、排名
   - ❌ 不能采集：用户个人信息、私有数据

3. **技术措施**
   - 请求间隔：1-2秒
   - 使用代理IP（推荐）
   - 模拟真实浏览器（Playwright/Selenium）

### 数据采集优先级

**第一阶段（MVP）**:
- 手动采集50-100个热门产品作为测试数据
- 验证数据结构和分析逻辑

**第二阶段**:
- 自动化采集热门类目的Top 1000产品
- 每日更新价格和排名

**第三阶段**:
- 扩展到更多类目
- 实现历史数据追踪

---

## 第四步：MVP功能实现清单

### 后端API（必须实现）

- [ ] `GET /api/products` - 产品列表（支持筛选）
- [ ] `GET /api/products/{asin}` - 产品详情
- [ ] `GET /api/market-analysis?keyword=xxx` - 市场分析
- [ ] `GET /api/keywords/search?q=xxx` - 关键词搜索

### 前端页面（必须实现）

- [ ] 市场分析器页面
- [ ] 产品数据库页面（列表+筛选）
- [ ] ASIN查询详情页
- [ ] 基础导航和布局

### 数据采集（必须实现）

- [ ] 产品基础信息采集
- [ ] 价格和排名采集
- [ ] 数据存储到数据库

---

## 第五步：开发环境搭建

### 1. 安装依赖

**后端**:
```bash
cd backend
pip install fastapi uvicorn sqlalchemy psycopg2-binary requests beautifulsoup4
```

**前端**:
```bash
cd frontend
npm create vite@latest . -- --template react-ts
npm install
```

### 2. 数据库设置

**开发环境（SQLite）**:
```python
# 简单，无需额外配置
DATABASE_URL = "sqlite:///./marketniche.db"
```

**生产环境（PostgreSQL）**:
```bash
# 使用Docker
docker run -d --name postgres -e POSTGRES_PASSWORD=password -p 5432:5432 postgres
```

### 3. 运行项目

**后端**:
```bash
cd backend
uvicorn app.main:app --reload --port 8000
```

**前端**:
```bash
cd frontend
npm run dev
```

---

## 第六步：关键决策点

### 1. 数据来源选择

**选项A**: 自建爬虫（成本低，但需要维护）
**选项B**: 使用第三方数据API（成本高，但稳定）
**推荐**: MVP阶段用选项A，验证产品价值后再考虑选项B

### 2. 销量预估方案

**选项A**: 简单BSR映射表（快速实现）
**选项B**: 机器学习模型（准确但复杂）
**推荐**: MVP用选项A，后续优化为选项B

### 3. 关键词搜索量

**选项A**: 使用Google Keyword Planner API
**选项B**: 基于排名估算相对搜索量
**推荐**: MVP先用选项B，后续集成选项A

---

## 第七步：风险控制

### 技术风险
- **数据采集被封**: 准备多个数据源，考虑付费API
- **预估不准确**: 明确标注"预估"，提供置信区间
- **性能问题**: 使用缓存，优化数据库查询

### 法律风险
- **合规性**: 仅采集公开数据，遵守robots.txt
- **数据使用**: 明确用户协议，说明数据来源

---

## 快速验证路径（1周原型）

如果你想快速验证产品可行性，可以这样做：

### Week 1 原型

**Day 1**: 
- 手动收集20个荷兰站产品数据（Excel）
- 设计数据库表结构

**Day 2-3**:
- 实现简单的FastAPI后端
- 实现产品列表和详情API
- 使用Excel数据作为数据源

**Day 4-5**:
- 实现简单的React前端
- 展示产品列表和详情页

**Day 6-7**:
- 实现基础的市场分析功能（基于20个产品）
- 演示给潜在用户，收集反馈

**目标**: 验证产品概念是否可行，再决定是否投入更多资源。

---

## 下一步行动

1. ✅ 选择开发方案（MVP或完整方案）
2. ✅ 搭建项目基础结构
3. ✅ 实现第一个数据采集脚本
4. ✅ 实现第一个API端点
5. ✅ 实现第一个前端页面

**建议**: 从最简单的功能开始，逐步迭代。先让系统跑起来，再优化细节。

